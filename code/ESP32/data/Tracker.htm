#pragma once

const char validate_script[] PROGMEM = R"rawliteral(
  function validateElevationBounds(data) {
    const minEl = data._minimumElevation;
    const maxEl = data._maximumElevation;
    if (minEl != null && maxEl != null && minEl > maxEl) {
      throw new Error('Minimum elevation must be â‰¤ maximum elevation.');
    }
  }
)rawliteral";

const char onLoadScript[] PROGMEM = R"rawliteral(
    const now = new Date();
    const _date = document.getElementById('_date');
    const _time = document.getElementById('_time');
    _date.value = now.toISOString().split('T')[0]; // UTC Date
    _time.value = now.toISOString().split('T')[1].slice(0,5); // UTC time (HH:mm)
)rawliteral";

const char home_html[] PROGMEM = R"rawliteral(
<!DOCTYPE html>
<html lang=\"en\">

<head>
  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, user-scalable=no\" />
  <title>%title%</title>
  <link rel="stylesheet" href="/style.css">
  <script>

  window.onload = function() {
    initWebSocket();

  }
    function sendCommand(cmd) {
    console.log("Command:", cmd);
    // Example: send to device via HTTP
    fetch('/control', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ command: cmd })
    })
    .then(res => res.text())
    .then(txt => console.log("Response:", txt))
    .catch(err => console.error("Error:", err));
  }
  function initWebSocket() {
    const socket = new WebSocket('ws://' + window.location.hostname + '/ws_home');
    socket.onmessage = function(event) {
      const stateVal = JSON.parse(event.data);
      document.getElementById('TrackerMode').innerHTML = stateVal.mode;
      document.getElementById('TrackerState').innerHTML = stateVal.state;
      document.getElementById('Sun').innerHTML = stateVal.sun;
      document.getElementById('Horizontal').innerHTML = stateVal.horizontal;
      document.getElementById('Vertical').innerHTML = stateVal.vertical;
      if (stateVal.wind != null)
        document.getElementById('Wind').innerHTML = stateVal.wind;
    };
    socket.onerror = function(error) {
      console.error('WebSocket error:', error);
    };
    window.addEventListener('beforeunload', function() { if (socket) { socket.close(); } });
  }
  </script>
</head>

<body>
  <div id="home">
    <div id="hdr">
      <h2>%title%</h2>
      <div style='font-size: .6em;'>Firmware config version '%version%'</div>
      <hr>
      <div class="controller">
        <button class="up"    onclick="sendCommand('up')">Up</button>
        <button class="left"  onclick="sendCommand('left')">Left</button>
        <button class="stop"  onclick="sendCommand('stop')">Stop</button>
        <button class="right" onclick="sendCommand('right')">Right</button>
        <button class="down"  onclick="sendCommand('down')">Down</button>
      </div>

      <div class="state">
        <button class="track" onclick="sendCommand('track')">Track</button>
        <button class="cycle" onclick="sendCommand('cycle')">Cycle</button>
        <button class="park" onclick="sendCommand('park')">Park</button>
        <button class="protect" onclick="sendCommand('protect')">Protect</button>
      </div>
      <p></p><div class="state_box" id="TrackerMode"> </div></p>
      <p></p><div class="state_box" id="TrackerState"> </div></p>
      <p></p><div class="state_box" id="Sun"> </div></p>
      <p></p><div class="state_box" id="Horizontal"> </div></p>
      <p></p><div class="state_box" id="Vertical"> </div></p>
      <p></p><div class="state_box" id="Wind"> </div></p>
      <div class="link-row">
        <p><a href='settings'>Settings</a></p>
        <p><a href='/log' target='_blank'>Web Log</a></p>
      </div>
    </div>
  </div>
</body>

</html>
)rawliteral";

const char app_config[] PROGMEM = R"rawliteral(
<div>
  <div class="grid">
    <!-- Booleans -->
    <div class="field">
      <label for="_dualAxis">Dual axis</label>
      <div class="check">
        <input type="checkbox" id="_dualAxis" name="_dualAxis" />
        <span class="muted">Dual-axis Tracker</span>
      </div>
    </div>
    <div class="field">
      <label for="_hasAnemometer">Anemometer present</label>
      <div class="check">
        <input type="checkbox" id="_hasAnemometer" name="_hasAnemometer" />
        <span class="muted">Has Anemometer</span>
      </div>
    </div>

    <!-- Date Time -->
    <div class="field">
      <label for="_date">Date (UTC):</label>
      <input type="date" id="_date" name="_date">
    </div>
    <div class="field">
      <label for="_time">Time (UTC):</label>
      <input type="time" id="_time" name="_time">
    </div>

    <!-- Geolocation -->
    <div class="field">
      <label for="_latitude">Latitude (degrees, -90&deg; to 90&deg;)</label>
      <input type="number" id="_latitude" name="_latitude" min="-90" max="90" step="any"/>
    </div>
    <div class="field">
      <label for="_longitude">Longitude (degrees, -180&deg; to 180&deg;)</label>
      <input type="number" id="_longitude" name="_longitude" min="-180" max="180" step="any"/>
    </div>

    <!-- Azimuths -->
    <div class="field">
      <label for="_eastAzimuth">East azimuth (0-360&deg;)</label>
      <input type="number" id="_eastAzimuth" name="_eastAzimuth" step="1" min="0" max="360" inputmode="numeric" />
    </div>
    <div class="field">
      <label for="_westAzimuth">West azimuth (0-360&deg;)</label>
      <input type="number" id="_westAzimuth" name="_westAzimuth" step="1" min="0" max="360" inputmode="numeric" />
    </div>

    <!-- Elevation limits -->
    <div class="field">
      <label for="_minimumElevation">Minimum elevation (degrees, 0-90&deg;)</label>
      <input type="number" id="_minimumElevation" name="_minimumElevation" step="1" min="0" max="90" inputmode="numeric" />
    </div>
    <div class="field">
      <label for="_maximumElevation">Maximum elevation (degrees, 0-90&deg;)</label>
      <input type="number" id="_maximumElevation" name="_maximumElevation" step="1" min="0" max="90" inputmode="numeric" />
    </div>

    <!-- Travel lengths -->
    <div class="field">
      <label for="_horizontalLength">Horizontal travel length (inches)</label>
      <input type="number" id="_horizontalLength" name="_horizontalLength" step="1" min="0" inputmode="numeric"/>
    </div>
    <div class="field">
      <label for="_verticalLength">Vertical travel length (inches)</label>
      <input type="number" id="_verticalLength" name="_verticalLength" step="1" min="0" inputmode="numeric" />
    </div>

    <!-- Speeds -->
    <div class="field">
      <label for="_horizontalSpeed">Horizontal speed (inches/100s)</label>
      <input type="number" id="_horizontalSpeed" name="_horizontalSpeed" step="1" min="0" inputmode="numeric" />
    </div>
    <div class="field">
      <label for="_verticalSpeed">Vertical speed (inches/100s)</label>
      <input type="number" id="_verticalSpeed" name="_verticalSpeed" step="1" min="0" inputmode="numeric" />
    </div>
  </div>
  
</div>
)rawliteral";